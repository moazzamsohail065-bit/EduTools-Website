<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moazzam Hub - Pro Downloader</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { background-color: #eef2f5; font-family: 'Poppins', sans-serif; }
        .navbar { background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%); }
        .navbar-brand { font-weight: bold; color: white !important; }
        .hero { background: white; padding: 30px 20px; text-align: center; border-radius: 0 0 40px 40px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); margin-bottom: 20px; }
        .feature-card { border: none; border-radius: 15px; padding: 15px; background: white; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); height: 100%; cursor: pointer; }
        .ad-container { text-align: center; margin: 15px auto; padding: 10px; background: #fff; border: 2px solid #eee; border-radius: 10px; max-width: 340px; }
        .section-view { display: none; animation: fadeIn 0.4s; }
        .active-view { display: block; }
        @keyframes fadeIn { from {opacity:0;} to {opacity:1;} }
        
        /* Video Player Style */
        #video-player { width: 100%; max-width: 300px; border-radius: 10px; margin-top: 10px; display: none; }
        .result-box { display: none; background: #dff9fb; padding: 15px; border-radius: 15px; margin-top: 20px; border: 2px solid #c7ecee; }
    </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand navbar-dark sticky-top">
    <div class="container">
        <a class="navbar-brand" href="#" onclick="showHome()"><i class="fas fa-bolt"></i> Moazzam Hub</a>
        <button class="btn btn-sm btn-light rounded-pill ms-auto fw-bold" onclick="showHome()">Home</button>
    </div>
</nav>

<!-- 1. HOME DASHBOARD -->
<div id="home-view" class="section-view active-view">
    <div class="hero">
        <h2 class="fw-bold">All-in-One Toolkit</h2>
        <p class="text-muted small">TikTok Downloader (On-Site) ‚Ä¢ Notes ‚Ä¢ Games</p>
    </div>

    <!-- üí∞ AD SPOT 1 -->
    <div class="ad-container">
        <script type="text/javascript" src="//pl28185755.effectivegatecpm.com/09/a8/5f/09a85fb4fd4acbfb73562548f399f7b7.js"></script>
    </div>

    <div class="container mb-5">
        <div class="row g-3">
            <div class="col-6">
                <div class="feature-card" onclick="showSection('downloader-view')">
                    <div class="text-danger fs-1"><i class="fas fa-cloud-download-alt"></i></div>
                    <h6 class="mt-2 fw-bold">Downloader</h6>
                    <small class="text-muted">TikTok & More</small>
                </div>
            </div>
            <div class="col-6">
                <div class="feature-card" onclick="showSection('student-view')">
                    <div class="text-primary fs-1"><i class="fas fa-graduation-cap"></i></div>
                    <h6 class="mt-2 fw-bold">Notes</h6>
                    <small class="text-muted">Class 9-12</small>
                </div>
            </div>
            <div class="col-6">
                <div class="feature-card" onclick="showSection('game-view')">
                    <div class="text-warning fs-1"><i class="fas fa-gamepad"></i></div>
                    <h6 class="mt-2 fw-bold">Games</h6>
                    <small class="text-muted">Play Now</small>
                </div>
            </div>
             <div class="col-6">
                <div class="feature-card" onclick="showSection('calc-view')">
                    <div class="text-success fs-1"><i class="fas fa-calculator"></i></div>
                    <h6 class="mt-2 fw-bold">Calc</h6>
                    <small class="text-muted">% Result</small>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 2. SMART DOWNLOADER -->
<div id="downloader-view" class="section-view container mt-3">
    <button class="btn btn-secondary btn-sm rounded-pill mb-3" onclick="showHome()">‚Üê Back</button>
    
    <div class="card p-4 border-0 shadow rounded-4 text-center">
        <h4 class="text-danger fw-bold"><i class="fab fa-tiktok"></i> <i class="fab fa-instagram"></i> Pro Downloader</h4>
        <p class="text-muted small">TikTok Videos YAHIN download hongi!</p>
        
        <div class="input-group">
            <input type="text" id="dlUrl" class="form-control" placeholder="Paste Video Link...">
            <button class="btn btn-dark" onclick="processVideo()"><i class="fas fa-search"></i></button>
        </div>

        <!-- Loading -->
        <div id="loading" class="mt-3" style="display:none;">
            <div class="spinner-border text-danger" role="status"></div>
            <p class="small fw-bold mt-2">Connecting to Server...</p>
        </div>

        <!-- Result Box (For TikTok) -->
        <div id="result-box" class="result-box">
            <h5 class="fw-bold text-success">‚úÖ Video Found!</h5>
            
            <!-- Video Player -->
            <video id="video-player" controls playsinline></video>
            
            <a id="download-btn" href="#" class="btn btn-success w-100 rounded-pill fw-bold shadow mt-3" download>
                <i class="fas fa-download"></i> Download Video
            </a>
            <a id="music-btn" href="#" class="btn btn-outline-primary w-100 rounded-pill btn-sm mt-2" download>
                <i class="fas fa-music"></i> Download Music
            </a>
        </div>

        <!-- üí∞ AD SPOT 2 -->
        <div class="ad-container mt-4">
            <script type="text/javascript" src="//pl28185755.effectivegatecpm.com/09/a8/5f/09a85fb4fd4acbfb73562548f399f7b7.js"></script>
        </div>
    </div>
</div>

<!-- 3. STUDENT NOTES -->
<div id="student-view" class="section-view container mt-3">
    <button class="btn btn-secondary btn-sm rounded-pill mb-3" onclick="showHome()">‚Üê Back</button>
    <div class="card p-3 border-0 shadow-sm rounded-4">
        <h4 class="text-primary fw-bold">üìö Notes Library</h4>
        <div class="list-group mt-3">
            <a href="#" class="list-group-item d-flex justify-content-between"><span>Physics 9th</span> <span class="badge bg-primary">PDF</span></a>
            <a href="#" class="list-group-item d-flex justify-content-between"><span>Math 10th</span> <span class="badge bg-primary">PDF</span></a>
        </div>
    </div>
</div>

<!-- 4. GAMES -->
<div id="game-view" class="section-view container mt-3 text-center">
    <button class="btn btn-secondary btn-sm rounded-pill mb-3" onclick="showHome()">‚Üê Back</button>
    <div class="card p-4 border-0 shadow rounded-4">
        <h3 class="fw-bold text-warning">Tic Tac Toe</h3>
        <p>Game is loading...</p>
        <button class="btn btn-outline-dark" onclick="alert('Game Reset!')">Restart</button>
    </div>
</div>

<!-- 5. CALCULATOR -->
<div id="calc-view" class="section-view container mt-3">
    <button class="btn btn-secondary btn-sm rounded-pill mb-3" onclick="showHome()">‚Üê Back</button>
    <div class="card p-4 shadow border-0 rounded-4">
         <h4 class="text-center">Percentage Calc</h4>
         <input type="number" id="ob" class="form-control mb-2" placeholder="Obtained Marks">
         <input type="number" id="tot" class="form-control mb-2" placeholder="Total Marks">
         <button class="btn btn-success w-100" onclick="
            let o=document.getElementById('ob').value;
            let t=document.getElementById('tot').value;
            if(o&&t) alert('Percentage: ' + (o/t*100).toFixed(2) + '%');
         ">Calculate</button>
    </div>
</div>

<footer class="text-center mt-5 mb-3 text-muted small">
    &copy; 2025 Moazzam Hub
</footer>

<!-- LOGIC SCRIPT -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    // Navigation
    function showSection(id) {
        document.querySelectorAll('.section-view').forEach(el => el.classList.remove('active-view'));
        document.getElementById(id).classList.add('active-view');
    }
    function showHome() { showSection('home-view'); }

    // --- üöÄ NEW HYBRID DOWNLOADER LOGIC ---
    async function processVideo() {
        let url = document.getElementById('dlUrl').value.trim();
        let loader = document.getElementById('loading');
        let resultBox = document.getElementById('result-box');
        
        if(!url) { alert("Please link paste karein!"); return; }

        loader.style.display = 'block';
        resultBox.style.display = 'none';

        // 1. TIKTOK LOGIC (WORKS ON SITE)
        if (url.includes('tiktok.com')) {
            try {
                // Using TikWM Public API (CORS Friendly)
                const response = await fetch(`https://www.tikwm.com/api/?url=${url}&hd=1`);
                const data = await response.json();

                loader.style.display = 'none';

                if(data.code === 0) {
                    // Success! Show Video Player
                    resultBox.style.display = 'block';
                    
                    let vidUrl = data.data.play;
                    let musicUrl = data.data.music;
                    
                    // Update Player
                    let player = document.getElementById('video-player');
                    player.src = vidUrl;
                    player.style.display = 'block';
                    
                    // Update Buttons
                    document.getElementById('download-btn').href = vidUrl;
                    document.getElementById('music-btn').href = musicUrl;
                } else {
                    alert("Video Fetch Failed. Private ho sakti hai.");
                }
            } catch (err) {
                loader.style.display = 'none';
                fallbackMethod(url);
            }
        } 
        
        // 2. YOUTUBE / INSTAGRAM (SECURITY BYPASS)
        else {
            loader.style.display = 'none';
            // GitHub Pages par Insta/YT direct block hota hai due to CORS.
            // Hum user ko error dikhane ke bajaye "Secure Window" mein le jayenge.
            
            let confirmAction = confirm("Instagram/YouTube Security ki wajah se direct download block hai.\n\nKya hum Secure Server (SSYouTube/SnapInsta) open karein?");
            
            if(confirmAction) {
                fallbackMethod(url);
            }
        }
    }

    function fallbackMethod(url) {
        if(url.includes('youtube') || url.includes('youtu.be')) {
            window.open('https://ssyoutube.com/en/watch?v=' + extractId(url), '_blank');
        } else if(url.includes('instagram')) {
            window.open('https://snapinsta.app/', '_blank');
        } else if(url.includes('facebook')) {
             window.open('https://fdown.net/', '_blank');
        } else {
            window.open('https://savefrom.net/', '_blank');
        }
    }

    function extractId(url) {
        var match = url.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);
        return (match && match[2].length == 11) ? match[2] : null;
    }
</script>

</body>
    </html>
